"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}},n=e(t.exports=function(){const e="horizontal",t="all",n="manual",o="nesting",l="headings",s=s=>{const a=()=>{const a=s.getConfig().autotoc||{},i={};return a.mode===e?i.mode=e:a.mode===t?i.mode=t:(void 0!==a.mode&&a.mode!==n&&console.warn("Unknown autotoc mode: "+a.mode),i.mode=n),a.levels===o?i.levels=o:(void 0!==a.levels&&a.levels!==l&&console.warn("Unknown autotoc levels: "+a.levels),i.levels=l),"function"==typeof a.transformationFn?i.transformationFn=a.transformationFn:i.transformationFn=e=>e,i.defaultListStyles=a.defaultListStyles||"ul",i},i=(o,l)=>{if(void 0!==l.dataset.tocIgnore||"false"===l.dataset.tocIgnore||"hidden"===l.dataset.visibility&&!0!==s.getConfig().showHiddenSlides)return!1;if(o===t)return!0;if(o===e){const e=s.getIndices(l);return void 0===e.v?!(l.firstElementChild&&"section"===l.firstElementChild.tagName.toLowerCase()):0===e.v||void 0!==l.dataset.toc}return o===n&&void 0!==l.dataset.toc},r=e=>{for(const t of e.children)if(t.tagName.match(/^H[1-7]$/i))return{level:parseInt(t.tagName.substring(1)),title:t.innerText||""};return{level:1,title:"???"}},d=(e,t)=>{let n=new Set(void 0===t.dataset.tocGroups?[]:t.dataset.tocGroups.split(/\s*,\s*/).map((e=>e.toUpperCase())));const o=s.getIndices(t);let a=null,i=t.dataset.tocTitle||"";""===i&&(a=r(t),i=a.title),i=e.transformationFn(i,t);let d=0,c=t.dataset.tocLevel;return void 0!==c&&(d=parseInt(c)),(0===d||isNaN(d))&&(e.levels===l?(null===a&&(a=r(t)),d=a.level):d=void 0===o.v||0===o.v?1:2),{level:d,title:i,groups:n,indices:o}},c=e=>{const t=s.getRevealElement().ownerDocument.createElement("a");t.innerText=e.title;let n="#/"+e.indices.h;void 0!==e.indices.v&&(n+="/"+e.indices.v,void 0!==e.indices.f&&(n+="/"+e.indices.f)),t.href=n;const o=s.getRevealElement().ownerDocument.createElement("li");return o.appendChild(t),o},f=(e,t,n)=>{const o=t.dataset.tocGroups,l=(t.dataset.tocStyles||e.defaultListStyles).split(/\s*,\s*/),s=new Set(void 0===o?[]:o.split(/\s*,\s*/).map((e=>e.toUpperCase()))),a=[t],i=e=>{if(s.size>0){let t=!1;return e.groups.forEach((e=>{s.has(e)&&(t=!0)})),!t}};for(let e of n)if(!i(e)){for(;e.level+1<a.length;)a.pop();if(e.level+1===a.length){const t=c(e);a[a.length-1].after(t),a[a.length-1]=t}else{let n="";for(n=e.level-1<l.length?l[e.level-1]:l[l.length-1];e.level>a.length;){const e=t.ownerDocument.createElement(n),o=t.ownerDocument.createElement("li");e.append(o),a[a.length-1].append(e),a.push(o)}const o=t.ownerDocument.createElement(n),s=c(e);o.append(s),a[a.length-1].append(o),a.push(s)}}},u=()=>{const e=s.getSlidesElement().querySelectorAll("[data-toc-insert]");if(0===e.length)return void console.log("No element with 'data-toc-insert' attribute found. Won't generate any table of content.");const t=a(),n=s.getSlides().filter((e=>i(t.mode,e))).map((e=>d(t,e)));e.forEach((e=>f(t,e,n)))};try{u()}catch(e){console.error("Could not create tocs",e)}};return()=>({id:"autotoc",init:s,destroy:()=>{}})}());export{n as default};
